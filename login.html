<!DOCTYPE html>
<html lang="en" dir="ltr" data-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login · Register | GrowwBike</title>
    <link rel="icon" href="images/growwpark_logo.jpg" type="image/jpeg">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root, html[data-theme='light'] {
            --color-background: #FFFFFF;
            --color-surface: #F8F8F8;
            --color-primary-text: #1E1E1E;
            --color-secondary-text: #4B4B4B;
            --color-accent: #F97316; /* Vibrant Orange */
            --color-accent-light: #FB923C; 
            --color-border: #E0E0E0;
            --color-input-bg: #FFFFFF;
        }
        html[data-theme='dark'] {
            --color-background: #0A0A0A;
            --color-surface: #1A1A1A;
            --color-primary-text: #FFFFFF;
            --color-secondary-text: #A0A0A0;
            --color-accent: #F97316; 
            --color-accent-light: #EA580C; 
            --color-border: #333333;
            --color-input-bg: #0A0A0A;
        }

        body {
            background-color: var(--color-background);
            color: var(--color-primary-text);
            font-family: 'Inter', ui-sans-serif, system-ui, sans-serif;
            transition: background-color 0.3s, color 0.3s;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
            padding: 1.5rem;
            /* Default: No scroll for laptop */
            overflow: hidden;
        }

        /* Mobile Scrolling Fix & 360px support */
        @media (max-width: 768px), (max-height: 700px) {
            body {
                overflow-y: auto;
                align-items: flex-start;
                padding-top: 5rem;
            }
            .auth-card {
                max-height: none !important;
                margin-bottom: 2rem;
            }
        }

        .text-orange { color: var(--color-accent); }
        .text-theme-accent { color: var(--color-accent); }

        .auth-card {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            overflow: hidden;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            max-height: 92vh;
            display: flex;
            position: relative;
            z-index: 10;
        }

        /* Bubbles Positioned ABOVE the box - Not touching */
        .external-controls {
            position: absolute;
            top: -3.5rem; 
            right: 0.5rem;
            z-index: 50;
            display: flex;
            gap: 0.75rem;
        }
        html[dir='rtl'] .external-controls {
            right: auto;
            left: 0.5rem;
        }

        .control-bubble {
            background-color: var(--color-surface);
            border: 1px solid var(--color-border);
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 12px;
            transition: all 0.2s;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        .control-bubble:hover {
            transform: translateY(-2px);
            background-color: var(--color-accent);
            color: #FFFFFF;
            border-color: var(--color-accent);
        }

        .input-field {
            background-color: var(--color-input-bg);
            border: 2px solid var(--color-border);
            color: var(--color-primary-text);
            transition: all 0.2s;
            padding-left: 2.75rem;
        }
        .input-field:focus {
            border-color: var(--color-accent);
            outline: none;
            box-shadow: 0 0 0 3px rgba(249, 115, 22, 0.2);
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--color-accent-light) 0%, var(--color-accent) 100%);
            color: #000000;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            transform: translateY(-1px);
            box-shadow: 0 10px 15px -3px rgba(249, 115, 22, 0.4);
            filter: brightness(1.1);
        }

        .strength-bar {
            height: 4px;
            width: 0%;
            transition: all 0.3s;
            border-radius: 2px;
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.4s ease-out forwards;
        }
        .tab-content.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .form-panel {
            overflow-y: auto;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }
        .form-panel::-webkit-scrollbar { display: none; }

        #toast-container {
            position: fixed;
            top: 1.5rem;
            z-index: 9999;
        }
        html[dir='ltr'] #toast-container { right: 1.5rem; }
        html[dir='rtl'] #toast-container { left: 1.5rem; }

        .toast {
            animation: slideIn 0.3s ease-out forwards;
            background: var(--color-surface);
            border-left: 4px solid var(--color-accent);
        }
        @keyframes slideIn {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body>  

    <div class="relative w-full max-w-5xl">
        
        <!-- Icons Positioned Above (Separated from Card) -->
        <div class="external-controls">
            <button id="rtl-toggle" class="control-bubble" title="Switch Language">
                <i class="fas fa-exchange-alt"></i>
            </button>
            <button id="theme-toggle" class="control-bubble" title="Toggle Theme">
                <i class="fas fa-moon light-icon"></i>
                <i class="fas fa-sun dark-icon hidden"></i>
            </button>
        </div>

        <!-- Main Auth Card -->
        <div class="auth-card w-full flex flex-col md:flex-row rounded-3xl min-h-[600px]">
            
            <!-- Left Panel: Bike Branding (Desktop) -->
            <div class="hidden md:flex md:w-5/12 relative overflow-hidden bg-black flex-shrink-0">
                <img src="https://images.unsplash.com/photo-1558981806-ec527fa84c39?q=80&w=2070&auto=format&fit=crop" alt="Premium Bike" class="absolute inset-0 w-full h-full object-cover opacity-50">
                
                <div class="relative z-10 p-10 lg:p-12 flex flex-col justify-between text-white w-full">
                    <div>
                        <div class="mb-12">
                            <a href="index.html" class="flex items-center gap-3 text-3xl font-extrabold tracking-tight">    
                                <i class="fas fa-bicycle text-orange"></i>
                                <span><span class="text-orange">GrowwBike</span></span>
                            </a>
                        </div>
                        
                        <h2 class="text-4xl lg:text-5xl font-bold leading-tight mb-4">Ride with <span class="text-orange">Precision</span></h2>
                        <p class="text-lg text-gray-300 max-w-sm">Join the elite community of cyclists. Track performance and discover new horizons with GrowwBike.</p>
                    </div>

                    <div class="bg-black/40 backdrop-blur-md p-6 rounded-2xl border border-white/10">
                        <p class="italic text-gray-100 mb-4 text-sm">"The tech integration at GrowwBike changed how I view my training metrics."</p>
                        <div class="flex items-center space-x-3 rtl:space-x-reverse">
                            <div class="w-10 h-10 rounded-full bg-gradient-to-br from-orange-400 to-orange-600 flex items-center justify-center">
                                <i class="fas fa-user-tie text-black text-xs"></i>
                            </div>
                            <div>
                                <p class="font-bold text-xs uppercase tracking-wider">Marcus Vane</p>
                                <p class="text-[10px] text-orange font-bold">Pro Cyclist</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Panel: Form Area -->
            <div class="form-panel w-full md:w-7/12 p-6 md:p-8 lg:p-10 flex flex-col">
                
                <!-- Mobile Logo (Fixed Visibility) -->
                <div class="md:hidden mb-8 text-center">
                    <a href="index.html" class="inline-flex items-center gap-2 text-2xl font-extrabold tracking-tight">    
                        <i class="fas fa-bicycle text-orange"></i>
                        <span class="text-primary-text">Groww<span class="text-orange">Bike</span></span>
                    </a>
                </div>

                <!-- Tab Switching -->
                <div class="flex justify-between items-start mb-8">
                    <div class="flex border-b border-border w-full">
                        <button onclick="switchTab('login')" id="tab-login" class="pb-3 px-6 text-sm font-bold border-b-2 transition-all border-accent text-theme-accent">Sign In</button>
                        <button onclick="switchTab('register')" id="tab-register" class="pb-3 px-6 text-sm font-bold border-b-2 transition-all border-transparent text-gray-400">Join Now</button>
                    </div>
                </div>

                <!-- Login Content -->
                <div id="login-form" class="tab-content active">
                    <div class="mb-6">
                        <h3 class="text-3xl font-bold mb-2">Welcome Back</h3>
                        <p class="text-sm text-gray-500">Enter your credentials to access the GrowwBike Hub.</p>
                    </div>

                    <form onsubmit="handleAuth(event, 'login')" class="space-y-4">
                        <div class="relative">
                            <label class="block text-[10px] font-bold uppercase tracking-wider text-gray-400 mb-1.5 ml-1">Email Address</label>
                            <div class="relative">
                                <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm"></i>
                                <input type="email" required class="input-field w-full h-12 rounded-xl text-sm" placeholder="rider@growwbike.com">
                            </div>
                        </div>
                        <div class="relative">
                            <div class="flex justify-between items-center mb-1.5">
                                <label class="block text-[10px] font-bold uppercase tracking-wider text-gray-400 ml-1">Password</label>
                                <a href="#" class="text-[10px] font-bold text-orange hover:underline">Forgot Password</a>
                            </div>
                            <div class="relative">
                                <i class="fas fa-lock absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-sm"></i>
                                <input type="password" required class="input-field w-full h-12 rounded-xl text-sm pr-12" placeholder="••••••••">
                                <button type="button" onclick="togglePassword(this)" class="absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-orange transition-colors">
                                    <i class="fas fa-eye"></i>
                                </button>
                            </div>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="remember" class="w-4 h-4 rounded border-gray-600 text-orange focus:ring-orange bg-transparent">
                            <label for="remember" class="ml-2 text-xs text-gray-500">Remember this device</label>
                        </div>
                        <button type="submit" class="btn-primary w-full h-12 rounded-xl text-black font-bold shadow-lg text-sm uppercase tracking-widest mt-2">
                            Sign In
                        </button>
                    </form>
                </div>

                <!-- Register Content -->
                <div id="register-form" class="tab-content">
                    <div class="mb-4">
                        <h3 class="text-2xl font-bold mb-1">Create Account</h3>
                        <p class="text-xs text-gray-500">Gear up for your next adventure.</p>
                    </div>

                    <form onsubmit="handleAuth(event, 'register')" class="space-y-3">
                        <div class="grid grid-cols-2 gap-3">
                            <div class="relative">
                                <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-xs"></i>
                                <input type="text" required class="input-field w-full h-10 rounded-lg text-xs" placeholder="First Name">
                            </div>
                            <div class="relative">
                                <i class="fas fa-user absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-xs"></i>
                                <input type="text" required class="input-field w-full h-10 rounded-lg text-xs" placeholder="Last Name">
                            </div>
                        </div>

                        <div class="relative">
                            <i class="fas fa-envelope absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-xs"></i>
                            <input type="email" required class="input-field w-full h-10 rounded-lg text-xs" placeholder="Email Address">
                        </div>

                        <div class="grid grid-cols-2 gap-3">
                            <div class="relative">
                                <i class="fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-xs"></i>
                                <input type="password" id="reg-password" required class="input-field w-full h-10 rounded-lg text-xs pr-8" placeholder="Password">
                            </div>
                            <div class="relative">
                                <i class="fas fa-key absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 text-xs"></i>
                                <input type="password" required class="input-field w-full h-10 rounded-lg text-xs" placeholder="Confirm">
                            </div>
                        </div>

                        <div class="py-1">
                            <div class="w-full bg-gray-200 dark:bg-gray-800 h-1 rounded-full overflow-hidden">
                                <div id="strength-bar" class="strength-bar bg-red-500"></div>
                            </div>
                            <p id="strength-text" class="text-[8px] mt-1 text-gray-400 font-bold uppercase">Security: Weak</p>
                        </div>

                        <button type="submit" class="btn-primary w-full h-10 rounded-lg text-black font-bold text-xs uppercase tracking-widest">
                            Start Journey
                        </button>
                    </form>
                </div>

                <!-- Social Connect -->
                <div class="mt-auto pt-8 border-t border-border">
                    <div class="text-center mb-4">
                        <span class="text-[9px] font-bold text-gray-500 uppercase tracking-widest">Rapid Connect</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="flex items-center justify-center gap-3 h-11 border border-border rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-all text-xs font-bold">
                            <i class="fab fa-google text-red-500"></i>
                            <span>Google</span>
                        </button>
                        <button class="flex items-center justify-center gap-3 h-11 border border-border rounded-xl hover:bg-gray-50 dark:hover:bg-white/5 transition-all text-xs font-bold">
                            <i class="fab fa-facebook-f text-blue-500"></i>
                            <span>Facebook</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="toast-container"></div>

    <script>
        function switchTab(tab) {
            const loginForm = document.getElementById('login-form');
            const registerForm = document.getElementById('register-form');
            const tabLoginBtn = document.getElementById('tab-login');
            const tabRegisterBtn = document.getElementById('tab-register');

            if (tab === 'login') {
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
                tabLoginBtn.classList.add('border-accent', 'text-theme-accent');
                tabLoginBtn.classList.remove('border-transparent', 'text-gray-400');
                tabRegisterBtn.classList.remove('border-accent', 'text-theme-accent');
                tabRegisterBtn.classList.add('border-transparent', 'text-gray-400');
            } else {
                loginForm.classList.remove('active');
                registerForm.classList.add('active');
                tabRegisterBtn.classList.add('border-accent', 'text-theme-accent');
                tabRegisterBtn.classList.remove('border-transparent', 'text-gray-400');
                tabLoginBtn.classList.remove('border-accent', 'text-theme-accent');
                tabLoginBtn.classList.add('border-transparent', 'text-gray-400');
            }
        }

        const themeToggle = document.getElementById('theme-toggle');
        const rtlToggle = document.getElementById('rtl-toggle');
        const html = document.documentElement;

        const applyTheme = (theme) => {
            html.setAttribute('data-theme', theme);
            document.querySelectorAll('.light-icon').forEach(i => i.classList.toggle('hidden', theme === 'dark'));
            document.querySelectorAll('.dark-icon').forEach(i => i.classList.toggle('hidden', theme === 'light'));
        };

        themeToggle.addEventListener('click', () => {
            const current = html.getAttribute('data-theme');
            const next = current === 'light' ? 'dark' : 'light';
            localStorage.setItem('theme', next);
            applyTheme(next);
        });
        applyTheme(localStorage.getItem('theme') || 'dark');

        rtlToggle.addEventListener('click', () => {
            const currentDir = html.getAttribute('dir');
            const nextDir = currentDir === 'ltr' ? 'rtl' : 'ltr';
            html.setAttribute('dir', nextDir);
        });

        function togglePassword(btn) {
            const input = btn.parentElement.querySelector('input');
            const icon = btn.querySelector('i');
            const isPass = input.type === 'password';
            input.type = isPass ? 'text' : 'password';
            icon.className = isPass ? 'fas fa-eye-slash' : 'fas fa-eye';
        }

        const regPass = document.getElementById('reg-password');
        const strengthBar = document.getElementById('strength-bar');
        const strengthText = document.getElementById('strength-text');

        regPass.addEventListener('input', () => {
            const val = regPass.value;
            let score = 0;
            if (val.length > 5) score++;
            if (val.length > 8) score++;
            if (/[0-9]/.test(val)) score++;
            if (/[A-Z]/.test(val)) score++;
            if (/[^A-Za-z0-9]/.test(val)) score++;

            const colors = ['bg-red-500', 'bg-orange-500', 'bg-yellow-500', 'bg-blue-500', 'bg-green-500'];
            const labels = ['Weak', 'Basic', 'Standard', 'Secure', 'Indestructible'];
            
            strengthBar.style.width = (score * 20) + '%';
            strengthBar.className = 'strength-bar ' + (colors[score-1] || 'bg-red-500');
            strengthText.innerText = 'Security: ' + (labels[score-1] || 'Weak');
        });

        function showToast(message) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'toast p-4 mb-4 rounded-xl shadow-2xl flex items-center space-x-3 min-w-[240px]';
            toast.innerHTML = `
                <div class="bg-orange-500/10 p-2 rounded-lg text-orange-500"><i class="fas fa-info-circle"></i></div>
                <div class="text-xs font-bold text-primary-text">${message}</div>
            `;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function handleAuth(e, type) {
            e.preventDefault();
            const btn = e.target.querySelector('button[type="submit"]');
            btn.innerHTML = `<i class="fas fa-spinner fa-spin mr-2"></i> PROCESSING...`;
            btn.disabled = true;

            setTimeout(() => {
                showToast(type === 'login' ? "Syncing profile..." : "Welcome to the peloton!");
                setTimeout(() => {
                    window.location.href = 'userdash.html';
                }, 800);
            }, 1200);
        }
    </script>
</body>
</html>